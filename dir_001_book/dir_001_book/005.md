---
marp: true
theme: default # gaia, default, uncover,
class: middle # lead, center, middle
size: 4:3 # 4:3, 16:9, 16:10, 2.35:1, 1.85:1
header: "Institute of Technology of Cambodia"
footer: "Object-Oriented Programming with Java"
paginate: true
math: mathjax
typora-copy-images-to: ./images
---

# Chapter 5: Loops

---

## 5.1. Introduction

---

- **Loops** are fundamental constructs in programming that allow a sequence of statements to be executed repeatedly.
- This chapter introduces the concept of loops and explores the different types of loops in Java, including the `while`, `do-while`, and `for` loops.

---

### Need for Loops

- Repeating a block of code multiple times can be tedious and error-prone if written manually. Loops simplify this process by automating the repetition.
- Example: Displaying a message like "Welcome to Java!" a hundred times can be efficiently done using a loop instead of writing the print statement a hundred times.

---

### Types of Loops in Java

- **while Loop:** Executes statements repeatedly while a condition is true.
- **do-while Loop:** Executes the loop body first, then checks the condition.
- **for Loop:** Combines initialization, condition checking, and increment/decrement in a concise format.

---

### Key Concepts

- **Loop Body:** The block of statements that are executed repeatedly.
- **Iteration:** A single execution of the loop body.
- **Loop-Continuation-Condition:** A Boolean expression that determines whether the loop body will be executed.

---

**Example:**

```java
1: int count = 0;
2: while (count < 100) {
3: System.out.println("Welcome to Java!");
4: count++;
5: }
```

**Explanation:**

- In this example, the `while` loop executes the print statement and increments the `count` variable until `count` is no longer less than 100.
- The loop-continuation condition `count < 100` controls the number of iterations.
- The `count++` statement increments the `count` variable after each iteration.

---

### Counter-Controlled Loop

- A loop that uses a counter variable to control the number of iterations.
- Example: Displaying numbers from 1 to 10 using a for loop.

---

### Infinite Loop

- A loop that never terminates because the loop-continuation-condition never becomes false. These should be avoided as they can cause programs to hang or crash.

---

## 5.2. The `while` Loop

---

- **The `while` loop** is a fundamental construct in Java that allows a sequence of statements to be executed repeatedly as long as a specified condition is true.

---

**Syntax:** The syntax for a `while` loop is:

```java
1: while (loop-continuation-condition) {
2: // Loop body
3: Statement(s);
4: }
```

---

### Flowchart:

<img src="./images\image-20250307153719082.png" alt="image-20250307153719082" style="zoom:50%;" />

---

### Execution Process:

- The loop's execution can be represented in a flowchart where the loop-continuation condition is evaluated.
- If the condition is true, the loop body is executed, and the condition is evaluated again.
- This process repeats until the condition becomes false, at which point the loop terminates.

---

### Key Concepts:

- **Loop Body:** The block of statements that are executed repeatedly.
- **Iteration:** A single execution of the loop body.
- **Loop-Continuation-Condition:** A Boolean expression that determines whether the loop body will be executed.

---

**Example:** Displaying "Welcome to Java!" a hundred times using a `while` loop:

```java
1: int count = 0;
2: while (count < 100) {
3: System.out.println("Welcome to Java!");
4: count++;
5: }
```

**Note:** In this example, the loop body prints the message "Welcome to Java!" and increments the `count` variable until `count` is no longer less than 100.

---

### Counter-Controlled Loop

- A loop that uses a counter variable to control the number of iterations.

**Example:** Displaying numbers from 1 to 10 using a `while` loop:

```java
1: int i = 1;
2: while (i <= 10) {
3: System.out.println(i);
4: i++;
5: }
```

---

### Infinite Loop

- A loop that never terminates because the loop-continuation condition never becomes false.
- These should be avoided as they can cause programs to hang or crash.

**Example:** Infinite loop:

```java
1: while (true) {
2: // Loop body
3: }
```

---

### Common Pitfalls

- **Off-By-One Error:** This occurs when a loop executes one more or one less time than intended. For example, if the condition is `count <= 100` instead of `count < 100`, the loop will execute 101 times.
- **Infinite Loops:** Ensure that the loop-continuation condition will eventually become false to terminate the loop.

---

## 5.3. Case Study: Guessing Numbers

Practice.

---

## 5.4. Loop Design Strategies

---

- **Designing effective loops** involves understanding the steps that need to be repeated and writing a condition to terminate the loop appropriately.
- Writing correct loops can be challenging for novice programmers, but following a strategy can help.
- Here are three steps to help design a loop:

---

#### Step 1: Identify the Statements to be Repeated

- Determine which statements need to be executed multiple times.

**Example:** Generating random numbers, prompting for user input, or processing input.

---

#### Step 2: Wrap the Statements in a Loop

- Use a `while` loop to repeatedly execute the statements.

**Example:** Generating random numbers until the sum is greater than 100

```java
1: while (true) {
2: // Statements to be repeated
3: }
```

---

#### Step 3: Add Loop Control

- Code the loop-continuation condition and add statements to control the loop.

**Example:** Generating random numbers until the sum is greater than 100

```java
1: while (condition) {
2: // Statements to be repeated
3: // Additional statements for controlling the loop
4: }
```

---

### Example: Multiple Subtraction Quiz

- Generates five subtraction questions and reports the number of correct answers.

**Step 1: Identify the Statements to be Repeated:**

- Generate two random numbers.
- Prompt the user with a subtraction question.
- Grade the answer.

---

**Step 2: Wrap the Statements in a Loop:**

- Use a loop to repeat the steps five times.

**Step 3: Add a Loop Control Variable and Condition:**

- Use a control variable to execute the loop five times.
- This program follows the loop design strategy to ensure correct execution and efficient control of the loop.

---

## 5.5. Controlling a Loop with User Confirmation or a Sentinel Value

---

- **Controlling loops effectively** is crucial in programming to ensure they run the right number of times.
- This section explores using user confirmation or a sentinel value to control loop execution.

---

### User Confirmation

- You can control a loop by prompting the user for confirmation after each iteration.
- This allows the user to decide whether to continue or terminate the loop.

---

**Example:** Using user confirmation to control a loop

```java
1: char continueLoop = 'Y';
2: while (continueLoop == 'Y') {
3: // Execute loop body
4: ...
5: // Prompt user for confirmation
6: System.out.print("Enter Y to continue and N to quit: ");
7: continueLoop = input.nextLine().charAt(0);
8: }
```

**Note:** This allows the user to decide whether to continue or terminate the loop.

---

### Sentinel Value

- A sentinel value is a special value that signifies the end of a loop.
- This technique is useful when processing a set of input values.

---

**Example:** Reading input until a sentinel value is entered

```java
1: int data;
2: int sum = 0;
3: System.out.print("Enter an integer (the input ends if it is 0): ");
4: data = input.nextInt();
5: while (data != 0) {
6:   sum += data;
7:   System.out.print("Enter an integer (the input ends if it is 0): ");
8:   data = input.nextInt();
9: }
10: System.out.println("The sum is " + sum);
```

**Note:** In this example, the sentinel value `0` signals the end of input, and the loop terminates.

---

### Important Points

- **User Confirmation:** Allows for dynamic control of loop termination based on user input.
- **Sentinel Value:** Provides a predefined condition to end the loop, commonly used in data processing.

---

## 5.6. The `do-while` Loop

---

The **`do-while` loop** in Java is a variation of the `while` loop, but it guarantees that the loop body will be executed at least once. Here's a summary of the key points covered in this section:

---

**Syntax:** The syntax for a `do-while` loop

```java
1: do {
2: // Loop body
3: Statement(s);
4: } while (loop-continuation-condition);
```

**Note:** The loop body is executed first, and then the loop-continuation condition is evaluated.

---

**Flowchart:**

<img src="./images\image-20250307153823531.png" alt="image-20250307153823531" style="zoom:50%;" />

---

- The loop body is executed first, then the loop-continuation condition is evaluated.
- If the condition is true, the loop body is executed again; if it is false, the `do-while` loop terminates.

---

### Key Concepts

- **Loop Body:** The block of statements that are executed repeatedly.
- **Iteration:** A single execution of the loop body.
- **Loop-Continuation-Condition:** A Boolean expression that determines whether the loop body will be executed again.

**Example:** Displaying "Welcome to Java!" a hundred times using a `do-while` loop

```java
1: int count = 0;
2: do {
3: System.out.println("Welcome to Java!");
4: count++;
5: } while (count < 100);
```

---

### Differences Between `while` and `do-while`

|         Feature         | `while` Loop                                                                                                   | `do-while` Loop                                                                     |
| :---------------------: | -------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------- |
|   **Condition Check**   | The condition is checked **before** executing the loop body.                                                   | The condition is checked **after** executing the loop body.                         |
| **Execution Guarantee** | The loop body **may not execute** if the condition is false initially.                                         | The loop body **executes at least once**, even if the condition is false initially. |
|       **Syntax**        | `java while(condition) { // loop body } `                                                                      | `java do { // loop body } while(condition); `                                       |
|      **Use Case**       | Best when the number of iterations is **not known** and the loop should execute only if the condition is true. | Useful when the loop **must run at least once**, regardless of the condition.       |

---

**Example:**

- `while` loop (may not execute)

```java
1: int i = 5;
2: while (i < 5) {
3: // This will not execute
4: System.out.println("Inside while loop");
5: i++;
6: }
```

- `do-while` loop (executes at least once)

```java
1: int i = 5;
2: do {
3:   // This will execute once
4:   System.out.println("Inside do-while loop");
5:   i++;
6: } while (i < 5);
```

---

## 5.7. The `for` Loop

---

### Introduction

- The **`for` loop** in Java provides a concise way to write loops.
- This section covers its key aspects and usage:

---

**Syntax:** The syntax for a `for` loop is:

```java
1: for (initial-action; loop-continuation-condition;
2:      action-after-each-iteration) {
3:     // Loop body
4:     Statement(s);
5: }
```

**Note:**

- The `initial-action` initializes the loop control variable.
- The `loop-continuation-condition` determines whether the loop body is executed.
- The `action-after-each-iteration` updates the loop control variable.
- The loop body is executed as long as the condition is true.

---

### Flowchart

<img src="./images\image-20250307153901422.png" alt="image-20250307153901422" style="zoom:50%;" />

---

- The flowchart of a `for` loop starts with an initial action, followed by the loop-continuation condition.
- If the condition is true, the loop body is executed, followed by the action after each iteration.
- This process continues until the loop-continuation condition becomes false.

---

### Key Concepts

- **Initial Action:** Often used to initialize a control variable.
- **Loop-Continuation Condition:** A Boolean expression that determines whether the loop body is executed.
- **Action After Each Iteration:** Updates the control variable, typically incrementing or decrementing it.

---

**Example:** Displaying "Welcome to Java!" a hundred times using a `for` loop:

```java
1: for (int i = 0; i < 100; i++) {
2:     System.out.println("Welcome to Java!");
3: }
```

**Note:**

- In this example, the variable `i` is initialized to 0.
- The loop checks whether `i < 100` is true.
- If so, the loop body executes, printing the message and incrementing `i`.
- This process repeats until `i` reaches 100.

---

### Advantages

- **Conciseness:** Combines initialization, condition checking, and increment/decrement in a single line.
- **Error Reduction:** Reduces the risk of forgetting to update the loop control variable, which can lead to infinite loops.

---

### Variable Scope

- A variable declared in the `for` loop's initial action is limited to the loop's scope and cannot be accessed outside the loop.

---

### Multiple Control Variables

- You can declare and initialize multiple control variables in the `for` loop, separated by commas:

**Example:** Using multiple control variables in a `for` loop

```java
1: for (int i = 0, j = 0; i + j < 10; i++, j++) {
2: // Loop body
3: }
```

---

### Infinite Loop

- Omitting the loop-continuation condition creates an infinite loop.

**Syntax:**

```java
1: for ( ; ; ) {
2:     // Infinite loop
3: }
```

**Note:** It's better to use `while (true)` for clarity

---

**Example:** Summing numbers from 1 to 10 using a `for` loop:

```java
1: int sum = 0;
2: for (int i = 1; i <= 10; i++) {
3:     sum += i;
4: }
5: System.out.println("The sum is " + sum);
```

---

## 5.8. Which Loop to Use?

---

- **Choosing the right loop** for a given task can make your code more readable and efficient.
- This section compares the `while`, `do-while`, and `for` loops and gives guidance on when to use each type.

---

### Types of Loops

- **`while` Loop:** Checks the loop-continuation condition before executing the loop body. Use this loop when the number of repetitions is not known in advance.
- **`do-while` Loop:** Executes the loop body first, then checks the loop-continuation condition. Use this loop when you need to ensure the loop body is executed at least once.
- **`for` Loop:** Combines initialization, condition checking, and increment/decrement in a single line. Use this loop when the number of iterations is known in advance.

---

### Pretest vs. Posttest Loops

- **Pretest Loops:** `while` and `for` loops are pretest loops because the condition is checked before the loop body is executed.
- **Posttest Loop:** The `do-while` loop is a posttest loop because the condition is checked after the loop body is executed.

---

### Expressive Equivalence

- The `while`, `do-while`, and `for` loops are expressively equivalent, meaning you can write a loop in any of these three forms.

**Example:** Equivalent `while` and `for` loops

- `while` Loop:

```java
1: while (loop-continuation-condition) {
2:     // Loop body
3: }
```

- `for` Loop:

```java
1: for (; loop-continuation-condition;) {
2:     // Loop body
3: }
```

---

### General Guidance

- Use the loop statement that is most intuitive and comfortable for you.
- **`for` Loop:** Suitable when the number of repetitions is known in advance, such as displaying a message a hundred times.
- **`while` Loop:** Suitable when the number of repetitions is not fixed, such as reading numbers until the input is 0.
- **`do-while` Loop:** Suitable when the loop body must be executed at least once, such as reading user input.

---

### Common Mistakes

- Avoid adding a semicolon at the end of the `for` clause before the loop body, as it prematurely ends the loop.
- Ensure that the loop-continuation condition will eventually become false to avoid infinite loops.

---

## 5.9. Nested Loops

---

- A loop can be nested inside another loop, allowing complex iterations to be performed in a structured way.

---

### Definition

- Nested loops consist of an outer loop and one or more inner loops. Each time the outer loop is repeated, the inner loops are re-entered and started anew.

---

### Example Multiplication Table:

- The section presents a program that uses nested `for` loops to display a multiplication table.

---

**Example:** Multiplication Table Program

```java
1: public class MultiplicationTable {
2:   public static void main(String[] args) {
3:     System.out.println("Multiplication Table");
4:     System.out.print("   ");
5:     for (int j = 1; j <= 9; j++) {
6:       System.out.print("   " + j);
7:     }
8:     System.out.println("\n——————————————");
9:     for (int i = 1; i <= 9; i++) {
10:       System.out.print(i + " | ");
11:       for (int j = 1; j <= 9; j++) {
12:         System.out.printf("%4d", i * j);
13:       }
14:       System.out.println();
15:     }
16:   }
17: }
```

---

### Execution

- In the example, the outer loop controls the row of the table, while the inner loop controls the columns. The inner loop is executed completely for each iteration of the outer loop.
- The first `for` loop displays the table header, while the second `for` loop displays the multiplication results in a grid format.

---

### Performance Consideration

- Be aware that nested loops can significantly increase the time complexity of a program. For example, a loop nested three levels deep with each loop running up to 10,000 iterations will result in one trillion executions.

---

### Practical Tips

- Use nested loops when you need to perform actions on a multi-dimensional dataset (like matrices or tables).
- Keep track of each loop's control variable to avoid confusion.

---

## 5.10. Minimizing Numeric Errors

---

### Introduction

- Using floating-point numbers in loop continuation conditions may lead to numeric errors due to their approximate nature.
- This section discusses techniques to minimize these errors through an example.

---

### Floating-Point Arithmetic

- Floating-point numbers are represented approximately in computers, which can lead to precision errors.
- Example: Summing a series starting from 0.01 to 1.0 with increments of 0.01.

---

### Summation Example

- The exact sum should be 50.50, but using float type might give an imprecise result like 50.499985.

**Example:** Using float type:

```java
1: float sum = 0;
2: for (float i = 0.01f; i <= 1.0f; i += 0.01f) {
3:     sum += i;
4: }
5: System.out.println("The sum is " + sum);
```

---

### Precision Improvement

- Using a double type instead of float might improve precision slightly, but still not perfect.

**Example:** Using double type:

```java
1: double sum = 0;
2: for (double i = 0.01; i <= 1.0; i += 0.01) {
3:     sum += i;
4: }
5: System.out.println("The sum is " + sum);
```

**Note:** Even with double, the result might not be exact (e.g., 49.50000000000003) due to floating-point arithmetic.

---

### Solution Using Integer Count

- Use an integer counter to ensure all numbers are added to the sum precisely.

**Example:** Using integer count:

```java
1: double sum = 0;
2: double currentValue = 0.01;
3: for (int count = 0; count < 100; count++) {
4:     sum += currentValue;
5:     currentValue += 0.01;
6: }
7: System.out.println("The sum is " + sum);
```

**Note:** This method adds numbers from smallest to largest, which helps minimize errors.

---

### Adding in Different Orders

- Adding numbers from smallest to largest is more accurate than adding from largest to smallest.

**Example:** Adding from largest to smallest:

```java
1: double sum = 0;
2: double currentValue = 1.0;
3: for (int count = 0; count < 100; count++) {
4:     sum += currentValue;
5:     currentValue -= 0.01;
6: }
7: System.out.println("The sum is " + sum);
```

**Note:** This method might result in less accuracy due to finite-precision arithmetic.

---

## 5.11. Case Studies

Practice.

---

## 5.12. Keywords `break` and `continue`

---

In this section, we explore the use of the `break` and `continue` keywords in loops for additional control. Here's a summary of the key points covered:

---

### The `break` Keyword

- The `break` keyword is used to immediately terminate a loop.
- It can be employed in loops to stop the execution of the loop when a specific condition is met.

**Example:** Using `break` to terminate a loop:

```java
1: while (number < 20) {
2:     if (sum >= 100)
3:         break;
4:     number++;
5:     sum += number;
6: }
```

This code adds numbers starting from 1 until their sum is at least 100, terminating the loop using `break`.

---

### The `continue` Keyword

- The `continue` keyword ends the current iteration of the loop and proceeds to the next iteration.
- It skips the remaining statements in the loop body for the current iteration.

**Example:** Using `continue` to skip an iteration:

```java
1: while (number < 20) {
2:     number++;
3:     if (number == 10 || number == 11)
4:         continue;
5:     sum += number;
6: }
```

This code adds numbers from 1 to 20 except for 10 and 11, using `continue` to skip those numbers.

---

### Differences Between `break` and `continue`

- `break` exits the loop entirely, while `continue` skips the rest of the current iteration and jumps to the loop continuation condition.
- `continue` can be used in both `while` and `for` loops.
- In `while` and `do-while` loops, `continue` immediately evaluates the loop continuation condition after it is encountered.
- In `for` loops, `continue` executes the `action-after-each-iteration` before evaluating the loop continuation condition.

---

**Note:**

- Although `break` and `continue` can simplify programming in some cases, overusing or improperly using them can make programs difficult to read and debug.

---

**Example:** Using `break` in loops

```java
1: int number = 0;
2: int sum = 0;
3: while (number < 20) {
4:     number++;
5:     sum += number;
6:     if (sum >= 100) {
7:         break;
8:     }
9: }
10: System.out.println("The number is " + number);
11: System.out.println("The sum is " + sum);
```

---

**Example:** Using `continue` in loops

```java
1: int number = 0;
2: int sum = 0;
3: while (number < 20) {
4: number++;
5: if (number == 10 || number == 11) continue;
6: sum += number;
7: }
8: System.out.println("The sum is " + sum);
```

---

## 5.13. Case Study:<br> Checking Palindromes

Practice.

---

## 5.14. Case Study:<br> Displaying Prime Numbers

Practice.

<!-- style: |

  section {
  font-family: Nokora;
  }
  h1 {
  color: black;
  font-size: 50px;
  text-align: center;
  }
  h2 {
  font-size: 40px;
  text-align: center;
  }
  h3 {
  font-size: 30px;
  position: absolute;
  top: 60px;
  }
  h4 {
  font-size: 28px;
  }
  h5 {
  font-size: 28px;
  }
  h6 {
  font-size: 26px;
  }
  p {
  font-size: 26px;
  }
  li {
  font-size: 26px;
  }
  table {
  margin: auto;
  font-size: 20px;
  }
  img {
  display: block;
  margin: 0 auto;
  height: 500px;
  }
  section::after {
  font-size: 20px;
  }

-->
